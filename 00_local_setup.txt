
# Project: Python project for coding the Nebraska MIECHV data sourcing process.
    # U:\Working\nebraska_miechv_coded_data_source 
# Purpose of this document: Set up local computer with all initial installations, setup, & settings needed to run project.
    # U:\Working\nebraska_miechv_coded_data_source\00_local_setup.txt 

# Version: 03 

#######################################
### Enter Nebraska's portal ### 
#######################################

# Sign into Nebraska's portal through VMware Horizon Client.

# Open these instructions: 
    # U:\Working\nebraska_miechv_coded_data_source\00_local_setup.txt 

#######################################
### Adjust Computer Settings ### 
#######################################

# Adjust computer settings to see all file extensions:
    # Purpose: To be able to edit file extensions, you need to be able to see them.
    # On a Windows machine:
        # Open a File Explorer to "This PC".
        # "View" tab at top >> "Options" on right
        # In pop-up Options >> "View" tab at top:
            # UN-Select: "Hide extensions for known file types"
        # Additionally can:
            # DO: "Display the full path in the title bar"
            # DO: "Show hidden file, folders, or drives"

#######################################
### Git Setup ### 
#######################################

# Git is a version control system with which we will track changes to our code.
    # Git install includes a Git Bash Prompt.
    # Documentation: https://git-scm.com/doc

# Install Visual Studio Code (VSC) before Git (more details about VSC below):
    # Install VSC before Git.
    # Even if VSC is installed, please re-install / install a second version:
    # Download: https://code.visualstudio.com/download (click blue Windows button)
        # Ignore warning about uninstalling VSC before installation -- we need to install a second version.
        # When installing, use these settings:
            # Under "Other":
                # "Add 'Open with Code' action to Windows Explorer file context menu"
                # "Add 'Open with Code' action to Windows Explorer directory context menu"
                # Can use other options too:
                    # "Register Code as an editor for supported file types"
                    # "Add to PATH (requires shell restart)"

# After VSC installation:
    # Close any open VSC.
    # In File Explorer, go to project folder:
        # U:\Working\nebraska_miechv_coded_data_source 
    # Double click "nebraska_miechv_datasource.code-workspace" to open project in VSC.
    # Ignore the "Git not found" popup -- we'll do that next.
    # In the upper-left, click the "Explorer" icon (image of files/papers) to see all files in folder.
    # Open this instruction file in VSC:
        # 00_local_setup.txt

# Adjust VSC Settings:
    # How to opt out of Microsoft collecting data (setting "telemetry.enableTelemetry"): https://code.visualstudio.com/docs/supporting/faq#_how-to-disable-telemetry-reporting

# Install Git:
    # Install Git after Visual Studio Code (during install will set VSC as Git's default editor).
    # Download: https://git-scm.com/
        # When installing, use these settings:
            # In Select Components: Click "Check daily for Git for Windows updates"
            # Instead of Vim, Set the editor to "Use Visual Studio Code as Git's default editor"
            # "Override the default branch name for new repositories": main
            # Use Recommended "Git from the command line and also from 3rd-party software".
            # In "Configuring the line ending conversions": Select "Checkout as-is, commit Unix-style line endings"
            # Git Credential Manager Core: https://github.com/microsoft/Git-Credential-Manager-Core/blob/main/docs/faq.md#about-the-project
    # After: When you open a Git Bash it should use MINGW64.

# Set up personal information in Git:
    # Open Git Bash.
    # See config settings:
        # git config --list --show-origin
    # Set name & email for user on computer:
        # git config --global user.name "{insert_my_name}"
        # git config --global user.email "{insert_my_email}"
    # Check that it worked:
        # git config --list --show-origin

#######################################
### Visual Studio Code (VSC) Setup ### 
#######################################

# Set up Visual Studio Code (VSC) as a Python IDE.
    # VSC will be our Python IDE (integrated development environment) where we will interact with the code.
    # Documentation: https://code.visualstudio.com/docs

# Install VSC Extensions:
    # Python-related:
        # "Python" (also installs other Python & Jupyter extensions)
            # "Pylance"
            # "isort"
            # "Jupyter" (installed by Python, installs other Jupyter extensions)
                # "Jupyter Keymap"
                # "Jupyter Notebook Renderers"
                # "Jupyter Slide Show"
                # "Jupyter Cell Tags"
        # "autoDocstring"
        # "Python Environment Manager"
    # General Coding:
        # "IntelliCode"
            # "IntelliCode API Usage Examples" (installed by IntelliCode)
        # "Path Intellisense"
        # "indent-rainbow"
        # "Rainbow CSV"
        # "Prettier"
            # Note: Ctrl + Shift + P >> Format Document; (OR: Ctrl + Alt + F)
        # "Code Spell Checker"
        # "Todo Tree"
    # Git-related:
        # "GitLens — Git supercharged"
        # "Git Graph"

# Connect to Git project:
    !!!!!!!!! check
    # VSC then may ask if you want to connect to the repository >> Yes. (Which setting is this?)

# Using Git with VSC:
    # https://code.visualstudio.com/docs/sourcecontrol/overview 

# Git policies / Usage
    # Version Control: If you make any changes, make a commit.


#######################################
### Anaconda Setup ### 
#######################################

# Why use Anaconda? It manages different versions of Python & your "HOME" paths for you.
    # Anaconda installation includes Conda, Spyder, Jupyter Notebook, etc.
    # Documentation: https://docs.anaconda.com/free/navigator/ 

# Install Anaconda:
    # Download Anaconda free "individual" edition: https://www.anaconda.com/products/individual
    # Use all Default options.

#######################################
### Set up Conda for use in Git Bash ### 
#######################################

# Open a Git Bash shell.

# Create ".bashrc" file in your HOME directory:
    # If you don't know where your HOME is, in Git Bash execute:
        # echo $HOME
    # In Windows Explorer, go to HOME directory, create new TXT file, rename file & extension to be: ".bashrc".

# "Add the conda shell script to your .bashrc":
    # From these instructions: https://discuss.codecademy.com/t/setting-up-conda-in-git-bash/534473
    # Key instructions summarized here:
        # "use the search bar and search for “Anaconda3” and scroll down to the folders"
            # If doesn't show up, probably this: "C:\ProgramData\Anaconda3".
        # Open the "Anaconda3" folder >> navigate to "etc" >> then "profile.d"
            # For example: "C:\ProgramData\Anaconda3\etc\profile.d".
        # "Inside of the profile.d folder, you should see a file called conda.sh." 
        # Close any open Git Bash
        # In the "profile.d" folder >> Right Click >> choose "Git Bash Here".
        # In Git Bash that opens, run:
            # echo ". '${PWD}'/conda.sh" >> ~/.bashrc 
        # Close Git Bash.
        # Can go check the "~/.bashrc" file. New line should have been created, for example:
            # echo . '/c/ProgramData/Anaconda3/etc/profile.d'/conda.sh 

#######################################
### Set up Conda Environment ### 
#######################################

# First, create new environment: conda_env_nebraska_py310.
    # NEED Python 3.10+ -- match-case statements released in 3.10. 
    # See https://devguide.python.org/versions/ for status of python versions.
    # See release versions: https://www.python.org/doc/versions/ 

# Instructions if using Anaconda Navigator:
    # Open Anaconda Navigator >> Environments (on left) >> Create (button at bottom)
    # Name environment & select version of Python.
        # Note: Only certain versions of Python available through this way. If what's desired is not available, do the following:

# To get a specific version of Python, use a Bash Prompt. (installed along with Git).
    # Open Bash Prompt.

# Test that conda is running ### "verify conda install and check version":
conda info

# Create new conda virtual environment with a specific version of Python:
    # Also installs certain basic packages like pip.
conda create -n conda_env_nebraska_py310 python=3.10

#######################################
### Test Conda Environment ### 
#######################################

# In a Bash Prompt, enter conda virtual environment:
    # On Windows, can go to desired folder, Right Click, & "Git Bash Here".
    # Then:
conda activate conda_env_nebraska_py310

# Check lists of packages:
pip list
conda list

# Check that python & pip are installed:
python --version
pip --version

#######################################
### Set up Pipenv for the First Time ###
#######################################

# Pipenv documentation:
    # https://pypi.org/project/pipenv/ 
    # https://pipenv.pypa.io/ 

# Install package pipenv:
conda install pipenv

# Check that it installed.
conda list

# Navegate to the correct folder. Change directory:
cd <path>
    # OR on Windows, can go to desired folder, Right Click, & "Git Bash Here".

# When you run "pipenv shell" or "pipenv install" for the first time, it creates (1) the virtual environment & (2) the "Pipfile" in the working directory you are in.
    # Note: If you were to do "pipenv shell" first, it would do (1) & (2).
    # Then would need to create the "Pipfile.lock" with "pipenv lock".
# * Make sure installing with exact same Python version as is used by Conda venv.
    # Note: Identify the python patch version with "python --version". 
pipenv install --python 3.10.9

# See new files created:
ls

# Enter pipenv virtual environment:
pipenv shell
# If get error "UNC paths are not supported", then may need to change directories. For example:
cd /u/Working/nebraska_miechv_coded_data_source 
# Leave the virtual environment:
exit

#######################################
### Install needed packages ###
#######################################

# Install package pandas:
    # Note: This updates the "Pipfile" (with pandas as a required package) & "Pipfile.lock" (with pandas & its dependencies).
pipenv install pandas

#######################################
### Review the virtual environment ###
#######################################

# pipenv in-console documentation:
pipenv --help

# Locate the project:
pipenv --where 

# Locate the virtualenv:
pipenv --venv

# Locate the Python interpreter:
pipenv --py

# Displays currently-installed dependency graph information.
pipenv graph 

# Checks for PyUp Safety security vulnerabilities and against PEP 508 markers provided in Pipfile.
pipenv check

# Verify the hash in Pipfile.lock is up-to-date.
pipenv verify 

# Uninstalls all packages not specified in Pipfile.lock.
pipenv clean

# Installs all packages specified in Pipfile.lock.
pipenv sync

# Runs lock, then sync
pipenv update

#######################################
### Use the virtual environments ###
#######################################

# In a Bash Prompt, enter conda virtual environment:
    # On Windows, can go to desired folder, Right Click, & "Git Bash Here".
    # Then:
conda activate conda_env_nebraska_py310

# Enter:
pipenv shell
# If get error "UNC paths are not supported", then may need to change directories. For example:
cd /u/Working/nebraska_miechv_coded_data_source 
# Run python code within pipenv virtual environment within conda virtual environment.
# Exit:
exit

pipenv shell
# See differences between these 2 lists of packages:
# These are the packages available to be used.
pip list
# Note: If in Visual Studio Code you select the pipenv environment as the interpreter, pipenv graph won't work because pipenv is outside.
pipenv graph
# Note that "conda list" doesn't "see" packages installed for/within the pipenv environment.
conda list
exit

#######################################
### Debugging if Errors with pipenv setup ###
#######################################

# https://github.com/pypa/pipenv/issues/5052
# pipenv install throws --system is intended to be used for pre-existing Pipfile installation #5052
    # Remove previous virtual environments:   pipenv --rm

# https://github.com/pypa/virtualenv/issues/2367
# 20.15.0 - 'PythonInfo' object has no attribute 'version_nodot' (Jenkins / tox / py35) #2367
    # (1) First try clearning the cache:      pipenv --clear
    # (2) Second try:                         python -m virtualenv api -vvv --reset-app-data
        # However, this will create an unneeded "api" folder that can be deleted, and then you'll get this error:

# To remove venv & create a new one:
    # pipenv --rm
    # "pipenv --rm" should delete the specific venv subfolder here: C:\Users\{username}\.virtualenvs 
    # If not wanting to use them, before recreating a new venv, also delete all "Pipfile" & "Pipfile.lock" files for that project.

#######################################
### Packages Installed ###
#######################################

# Inside condas venv, Outside pipenv shell:

conda activate conda_env_nebraska_py310

pipenv install pandas

pipenv install Faker

# For VSC:
    # https://pypi.org/project/ipython/
    # https://pypi.org/project/ipykernel/
pipenv install ipython ipykernel

# If not installed with pandas:
    # (used by pandas for Excel files, but not always automatically installed)
    # https://pandas.pydata.org/docs/user_guide/io.html#excel-writer-engines 
    # https://pandas.pydata.org/pandas-docs/stable/getting_started/install.html#optional-dependencies 
pipenv install XlsxWriter openpyxl 
















